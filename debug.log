2024-09-19T11:41:10.505443+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:41:10.505443+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:41:10.506094+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:41:10.506094+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:41:55.750141+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:41:55.750141+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:41:55.750770+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:41:55.750770+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:42:46.047986+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:42:46.047986+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:42:46.048542+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:42:46.048542+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:44:27.794961+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:44:27.794961+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:44:27.795506+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:44:27.795506+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:45:30.846000+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:45:30.846000+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:45:30.846465+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:45:30.846465+0300  INFO  Ошибка при обработке запроса: Missing required arguments; Expected either ('messages' and 'model') or ('messages', 'model' and 'stream') arguments to be given
2024-09-19T11:47:56.581490+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:47:56.581490+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:47:57.635387+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T11:47:57.635387+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T11:51:16.676666+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:51:16.676666+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:51:17.635884+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T11:51:17.635884+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T11:56:30.870899+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:56:30.870899+0300  INFO  API_OPEN_AI обработан
2024-09-19T11:56:31.556746+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T11:56:31.556746+0300  INFO  Ошибка при обработке запроса: Error code: 400 - {'error': {'message': "Invalid type for 'messages[1].content[0]': expected an object, but got a string instead.", 'type': 'invalid_request_error', 'param': 'messages[1].content[0]', 'code': 'invalid_type'}}
2024-09-19T12:04:38.908125+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:04:38.908125+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:04:40.592449+0300  INFO  Обработка файла завершена
2024-09-19T12:04:40.592449+0300  INFO  Обработка файла завершена
2024-09-19T12:05:11.568452+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:11.568452+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:11.568452+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:12.861290+0300  INFO  Обработка файла завершена
2024-09-19T12:05:12.861290+0300  INFO  Обработка файла завершена
2024-09-19T12:05:12.861290+0300  INFO  Обработка файла завершена
2024-09-19T12:05:20.719715+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:20.719715+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:20.719715+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:20.719715+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:05:25.557740+0300  INFO  Обработка файла завершена
2024-09-19T12:05:25.557740+0300  INFO  Обработка файла завершена
2024-09-19T12:05:25.557740+0300  INFO  Обработка файла завершена
2024-09-19T12:05:25.557740+0300  INFO  Обработка файла завершена
2024-09-19T12:11:09.228472+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:11:09.228472+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:11:11.124154+0300  INFO  Обработка файла завершена
2024-09-19T12:11:11.124154+0300  INFO  Обработка файла завершена
2024-09-19T12:11:54.664220+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:11:54.664220+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:11:56.539961+0300  INFO  Обработка файла завершена
2024-09-19T12:11:56.539961+0300  INFO  Обработка файла завершена
2024-09-19T12:12:24.737467+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:12:24.737467+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:12:24.737467+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:12:26.628660+0300  INFO  Обработка файла завершена
2024-09-19T12:12:26.628660+0300  INFO  Обработка файла завершена
2024-09-19T12:12:26.628660+0300  INFO  Обработка файла завершена
2024-09-19T12:15:22.511257+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:22.511257+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:22.511257+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:22.511257+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:30.067371+0300  INFO  Обработка файла завершена
2024-09-19T12:15:30.067371+0300  INFO  Обработка файла завершена
2024-09-19T12:15:30.067371+0300  INFO  Обработка файла завершена
2024-09-19T12:15:30.067371+0300  INFO  Обработка файла завершена
2024-09-19T12:15:41.944027+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:41.944027+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:41.944027+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:41.944027+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:41.944027+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:43.207013+0300  INFO  Обработка файла завершена
2024-09-19T12:15:43.207013+0300  INFO  Обработка файла завершена
2024-09-19T12:15:43.207013+0300  INFO  Обработка файла завершена
2024-09-19T12:15:43.207013+0300  INFO  Обработка файла завершена
2024-09-19T12:15:43.207013+0300  INFO  Обработка файла завершена
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:15:55.630733+0300  INFO  API_OPEN_AI обработан
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:16:03.233528+0300  INFO  Обработка файла завершена
2024-09-19T12:44:35.872162+0300  INFO  Ошибка при обработке запроса: Invalid `http_client` argument; Expected an instance of `httpx.Client` but got <class 'httpx.AsyncClient'>
2024-09-19T12:44:35.872162+0300  INFO  Ошибка при обработке запроса: Invalid `http_client` argument; Expected an instance of `httpx.Client` but got <class 'httpx.AsyncClient'>
2024-09-19T12:45:52.753514+0300  INFO  Ошибка при обработке запроса: OpenAI.__init__() got an unexpected keyword argument 'http_async_client'
2024-09-19T12:45:52.753514+0300  INFO  Ошибка при обработке запроса: OpenAI.__init__() got an unexpected keyword argument 'http_async_client'
2024-09-19T12:46:10.468106+0300  INFO  Ошибка при обработке запроса: OpenAI.__init__() got an unexpected keyword argument 'http_async_client'
2024-09-19T12:46:10.468106+0300  INFO  Ошибка при обработке запроса: OpenAI.__init__() got an unexpected keyword argument 'http_async_client'
2024-09-19T13:52:55.032978+0300  INFO  API_OPEN_AI обработан
2024-09-19T13:52:55.034037+0300  INFO  Бот запущен
2024-09-19T14:15:12.510581+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:15:12.511459+0300  INFO  Бот запущен
2024-09-19T14:20:46.676839+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:20:46.677964+0300  INFO  Бот запущен
2024-09-19T14:21:13.695043+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:21:13.696045+0300  INFO  Бот запущен
2024-09-19T14:23:02.329651+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:23:02.330561+0300  INFO  Бот запущен
2024-09-19T14:23:48.949488+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:23:48.950380+0300  INFO  Бот запущен
2024-09-19T14:24:11.914835+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:24:11.915776+0300  INFO  Бот запущен
2024-09-19T14:25:22.474097+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:25:22.475021+0300  INFO  Бот запущен
2024-09-19T14:26:32.169134+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:27:31.534585+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:27:31.535743+0300  INFO  Бот запущен
2024-09-19T14:28:24.279885+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:28:24.280757+0300  INFO  Бот запущен
2024-09-19T14:31:59.906560+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:31:59.907441+0300  INFO  Бот запущен
2024-09-19T14:34:09.625819+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:34:09.626962+0300  INFO  Бот запущен
2024-09-19T14:37:15.458330+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:37:15.459204+0300  INFO  Бот запущен
2024-09-19T14:47:10.807779+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:47:46.900426+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:47:46.902303+0300  INFO  Бот запущен
2024-09-19T14:48:59.737668+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:48:59.737668+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:48:59.737668+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:48:59.737668+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:56:05.488482+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:56:05.488482+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:56:05.488482+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:56:24.670239+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'html_text'
2024-09-19T14:56:24.670239+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'html_text'
2024-09-19T14:56:24.670239+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'html_text'
2024-09-19T14:57:05.291208+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:57:05.291208+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:57:05.291208+0300  INFO  API_OPEN_AI обработан
2024-09-19T14:57:14.421590+0300  ERROR  Ошибка при обновлении сообщения: BaseModel.__init__() takes 1 positional argument but 2 were given
2024-09-19T14:57:14.421590+0300  ERROR  Ошибка при обновлении сообщения: BaseModel.__init__() takes 1 positional argument but 2 were given
2024-09-19T14:57:14.421590+0300  ERROR  Ошибка при обновлении сообщения: BaseModel.__init__() takes 1 positional argument but 2 were given
2024-09-19T15:02:21.409464+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:02:21.409464+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:02:21.409464+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:03:35.238563+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:03:35.238563+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:03:35.238563+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:03:45.888873+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "tgbot/tgbot.h" at byte offset 1407
2024-09-19T15:03:45.888873+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "tgbot/tgbot.h" at byte offset 1407
2024-09-19T15:03:45.888873+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "tgbot/tgbot.h" at byte offset 1407
2024-09-19T15:04:30.543441+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:04:30.543441+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:04:30.543441+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:07.859286+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:07.859286+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:07.859286+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:09.159381+0300  INFO  Ответ gpt получен
2024-09-19T15:09:09.159381+0300  INFO  Ответ gpt получен
2024-09-19T15:09:09.159381+0300  INFO  Ответ gpt получен
2024-09-19T15:09:17.890589+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:17.890589+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:17.890589+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:17.890589+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:17.890589+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:09:26.843587+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "iostream" at byte offset 370
2024-09-19T15:09:26.843587+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "iostream" at byte offset 370
2024-09-19T15:09:26.843587+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "iostream" at byte offset 370
2024-09-19T15:09:26.843587+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "iostream" at byte offset 370
2024-09-19T15:09:26.843587+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Unsupported start tag "iostream" at byte offset 370
2024-09-19T15:10:45.375352+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:10:45.375352+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:10:45.375352+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:10:53.317981+0300  INFO  Ответ gpt получен
2024-09-19T15:10:53.317981+0300  INFO  Ответ gpt получен
2024-09-19T15:10:53.317981+0300  INFO  Ответ gpt получен
2024-09-19T15:13:02.046812+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:02.046812+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:02.046812+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:03.374125+0300  INFO  Ответ gpt получен
2024-09-19T15:13:03.374125+0300  INFO  Ответ gpt получен
2024-09-19T15:13:03.374125+0300  INFO  Ответ gpt получен
2024-09-19T15:13:11.450595+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:11.450595+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:11.450595+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:11.450595+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:11.450595+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:13:21.681361+0300  INFO  Ответ gpt получен
2024-09-19T15:13:21.681361+0300  INFO  Ответ gpt получен
2024-09-19T15:13:21.681361+0300  INFO  Ответ gpt получен
2024-09-19T15:13:21.681361+0300  INFO  Ответ gpt получен
2024-09-19T15:13:21.681361+0300  INFO  Ответ gpt получен
2024-09-19T15:16:32.536368+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:32.536368+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:32.536368+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:37.041377+0300  INFO  Ответ gpt получен
2024-09-19T15:16:37.041377+0300  INFO  Ответ gpt получен
2024-09-19T15:16:37.041377+0300  INFO  Ответ gpt получен
2024-09-19T15:16:57.057070+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:57.057070+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:57.057070+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:57.057070+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:16:57.057070+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:17:04.632408+0300  INFO  Ответ gpt получен
2024-09-19T15:17:04.632408+0300  INFO  Ответ gpt получен
2024-09-19T15:17:04.632408+0300  INFO  Ответ gpt получен
2024-09-19T15:17:04.632408+0300  INFO  Ответ gpt получен
2024-09-19T15:17:04.632408+0300  INFO  Ответ gpt получен
2024-09-19T15:19:24.597474+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:19:24.597474+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:19:24.597474+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:19:29.116369+0300  INFO  Ответ gpt получен
2024-09-19T15:19:29.116369+0300  INFO  Ответ gpt получен
2024-09-19T15:19:29.116369+0300  INFO  Ответ gpt получен
2024-09-19T15:28:03.713736+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:28:03.713736+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:28:03.713736+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:28:03.713736+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:28:03.713736+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:28:12.294600+0300  INFO  Ответ gpt получен
2024-09-19T15:28:12.294600+0300  INFO  Ответ gpt получен
2024-09-19T15:28:12.294600+0300  INFO  Ответ gpt получен
2024-09-19T15:28:12.294600+0300  INFO  Ответ gpt получен
2024-09-19T15:28:12.294600+0300  INFO  Ответ gpt получен
2024-09-19T15:38:02.783728+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:38:02.783728+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:38:02.783728+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:38:10.287271+0300  INFO  Ответ gpt получен
2024-09-19T15:38:10.287271+0300  INFO  Ответ gpt получен
2024-09-19T15:38:10.287271+0300  INFO  Ответ gpt получен
2024-09-19T15:40:35.810051+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:40:35.810051+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:40:35.810051+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:40:35.810051+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:40:35.810051+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:40:47.108571+0300  INFO  Ответ gpt получен
2024-09-19T15:40:47.108571+0300  INFO  Ответ gpt получен
2024-09-19T15:40:47.108571+0300  INFO  Ответ gpt получен
2024-09-19T15:40:47.108571+0300  INFO  Ответ gpt получен
2024-09-19T15:40:47.108571+0300  INFO  Ответ gpt получен
2024-09-19T15:44:05.420258+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:44:05.420258+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:44:05.420258+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:44:13.971548+0300  INFO  Ответ gpt получен
2024-09-19T15:44:13.971548+0300  INFO  Ответ gpt получен
2024-09-19T15:44:13.971548+0300  INFO  Ответ gpt получен
2024-09-19T15:50:39.267683+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:50:39.267683+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:50:39.267683+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:50:40.620290+0300  INFO  Ответ gpt получен
2024-09-19T15:50:40.620290+0300  INFO  Ответ gpt получен
2024-09-19T15:50:40.620290+0300  INFO  Ответ gpt получен
2024-09-19T15:53:19.401775+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:53:19.401775+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:53:19.401775+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:53:28.484525+0300  INFO  Ответ gpt получен
2024-09-19T15:53:28.484525+0300  INFO  Ответ gpt получен
2024-09-19T15:53:28.484525+0300  INFO  Ответ gpt получен
2024-09-19T15:54:23.834374+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:54:23.834374+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:54:23.834374+0300  INFO  API_OPEN_AI обработан
2024-09-19T15:54:25.236660+0300  INFO  Ответ gpt получен
2024-09-19T15:54:25.236660+0300  INFO  Ответ gpt получен
2024-09-19T15:54:25.236660+0300  INFO  Ответ gpt получен
2024-09-19T16:02:25.774833+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:25.774833+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:25.774833+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:27.604307+0300  INFO  Ответ gpt получен
2024-09-19T16:02:27.604307+0300  INFO  Ответ gpt получен
2024-09-19T16:02:27.604307+0300  INFO  Ответ gpt получен
2024-09-19T16:02:54.401339+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:54.401339+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:54.401339+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:54.401339+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:54.401339+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:02:55.599369+0300  INFO  Ответ gpt получен
2024-09-19T16:02:55.599369+0300  INFO  Ответ gpt получен
2024-09-19T16:02:55.599369+0300  INFO  Ответ gpt получен
2024-09-19T16:02:55.599369+0300  INFO  Ответ gpt получен
2024-09-19T16:02:55.599369+0300  INFO  Ответ gpt получен
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:00.395370+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:01.813537+0300  INFO  Ответ gpt получен
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:07.525776+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:08.661059+0300  INFO  Ответ gpt получен
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:11.817500+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:13.133974+0300  INFO  Ответ gpt получен
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:18.533948+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:03:20.033214+0300  INFO  Ответ gpt получен
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:09:57.167334+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:10:19.948956+0300  INFO  Ответ gpt получен
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:37.464460+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:11:47.926082+0300  INFO  Ответ gpt получен
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:22.406583+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:13:33.585220+0300  INFO  Ответ gpt получен
2024-09-19T16:14:23.617852+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:23.617852+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:23.617852+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:23.617852+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:25.304902+0300  INFO  Ответ gpt получен
2024-09-19T16:14:25.304902+0300  INFO  Ответ gpt получен
2024-09-19T16:14:25.304902+0300  INFO  Ответ gpt получен
2024-09-19T16:14:25.304902+0300  INFO  Ответ gpt получен
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:31.719369+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:14:41.297577+0300  INFO  Ответ gpt получен
2024-09-19T16:16:18.172951+0300  ERROR  Ошибка при вводе команды /start: Telegram server says - Bad Request: can't parse entities: Character '!' is reserved and must be escaped with the preceding '\'
2024-09-19T16:16:18.172951+0300  ERROR  Ошибка при вводе команды /start: Telegram server says - Bad Request: can't parse entities: Character '!' is reserved and must be escaped with the preceding '\'
2024-09-19T16:18:42.422342+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:18:42.422342+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:18:42.422342+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:18:42.422342+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:18:57.052884+0300  INFO  Ответ gpt получен
2024-09-19T16:18:57.052884+0300  INFO  Ответ gpt получен
2024-09-19T16:18:57.052884+0300  INFO  Ответ gpt получен
2024-09-19T16:18:57.052884+0300  INFO  Ответ gpt получен
2024-09-19T16:22:51.509628+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:22:51.509628+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:22:51.509628+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:22:53.333044+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:22:53.333044+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:22:53.333044+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:23:30.101523+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:23:30.101523+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:23:30.101523+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:23:38.541718+0300  INFO  Ответ gpt получен
2024-09-19T16:23:38.541718+0300  INFO  Ответ gpt получен
2024-09-19T16:23:38.541718+0300  INFO  Ответ gpt получен
2024-09-19T16:24:25.802504+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:24:25.802504+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:24:25.802504+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:24:38.702955+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:24:38.702955+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:24:38.702955+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:25:03.511550+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:25:03.511550+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:25:03.511550+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:25:16.071540+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:25:16.071540+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:25:16.071540+0300  ERROR  Ошибка при обновлении сообщения: Telegram server says - Bad Request: can't parse entities: Character '-' is reserved and must be escaped with the preceding '\'
2024-09-19T16:26:09.941778+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:09.941778+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:09.941778+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:11.816289+0300  INFO  Ответ gpt получен
2024-09-19T16:26:11.816289+0300  INFO  Ответ gpt получен
2024-09-19T16:26:11.816289+0300  INFO  Ответ gpt получен
2024-09-19T16:26:20.858322+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:20.858322+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:20.858322+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:20.858322+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:20.858322+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:27.270282+0300  INFO  Ответ gpt получен
2024-09-19T16:26:27.270282+0300  INFO  Ответ gpt получен
2024-09-19T16:26:27.270282+0300  INFO  Ответ gpt получен
2024-09-19T16:26:27.270282+0300  INFO  Ответ gpt получен
2024-09-19T16:26:27.270282+0300  INFO  Ответ gpt получен
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:31.051823+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:26:37.636256+0300  INFO  Ответ gpt получен
2024-09-19T16:27:04.007444+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:04.007444+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:04.007444+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:07.434618+0300  INFO  Ответ gpt получен
2024-09-19T16:27:07.434618+0300  INFO  Ответ gpt получен
2024-09-19T16:27:07.434618+0300  INFO  Ответ gpt получен
2024-09-19T16:27:16.864798+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:16.864798+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:16.864798+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:16.864798+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:16.864798+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:27:24.537406+0300  INFO  Ответ gpt получен
2024-09-19T16:27:24.537406+0300  INFO  Ответ gpt получен
2024-09-19T16:27:24.537406+0300  INFO  Ответ gpt получен
2024-09-19T16:27:24.537406+0300  INFO  Ответ gpt получен
2024-09-19T16:27:24.537406+0300  INFO  Ответ gpt получен
2024-09-19T16:28:01.328262+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:28:01.328262+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:28:01.328262+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:28:18.849395+0300  INFO  Ответ gpt получен
2024-09-19T16:28:18.849395+0300  INFO  Ответ gpt получен
2024-09-19T16:28:18.849395+0300  INFO  Ответ gpt получен
2024-09-19T16:29:11.169332+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:29:11.169332+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:29:11.169332+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:29:12.374784+0300  ERROR  Ошибка при обновлении сообщения: 
2024-09-19T16:29:12.374784+0300  ERROR  Ошибка при обновлении сообщения: 
2024-09-19T16:29:12.374784+0300  ERROR  Ошибка при обновлении сообщения: 
2024-09-19T16:30:36.816059+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:30:36.816059+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:30:36.816059+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:30:51.160990+0300  INFO  Ответ gpt получен
2024-09-19T16:30:51.160990+0300  INFO  Ответ gpt получен
2024-09-19T16:30:51.160990+0300  INFO  Ответ gpt получен
2024-09-19T16:34:05.005733+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:34:05.005733+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:34:05.005733+0300  INFO  API_OPEN_AI обработан
2024-09-19T16:34:16.544800+0300  INFO  Ответ gpt получен
2024-09-19T16:34:16.544800+0300  INFO  Ответ gpt получен
2024-09-19T16:34:16.544800+0300  INFO  Ответ gpt получен
2024-09-20T23:00:02.622345+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:02.622345+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:02.622345+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:02.622345+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:03.529138+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:06.515016+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:00:14.260043+0300  INFO  Ответ gpt получен
2024-09-20T23:12:18.071982+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:12:18.071982+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:12:18.071982+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:12:18.071982+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:12:21.132026+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'edit_text'
2024-09-20T23:12:21.132026+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'edit_text'
2024-09-20T23:12:21.132026+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'edit_text'
2024-09-20T23:12:21.132026+0300  ERROR  Ошибка при обновлении сообщения: 'str' object has no attribute 'edit_text'
2024-09-20T23:51:39.740227+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:51:39.740227+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:51:39.740227+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:51:39.740227+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:51:39.740227+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:51:40.801060+0300  INFO  Ответ gpt получен
2024-09-20T23:51:40.801060+0300  INFO  Ответ gpt получен
2024-09-20T23:51:40.801060+0300  INFO  Ответ gpt получен
2024-09-20T23:51:40.801060+0300  INFO  Ответ gpt получен
2024-09-20T23:51:40.801060+0300  INFO  Ответ gpt получен
2024-09-20T23:53:05.471902+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:53:05.471902+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:53:05.471902+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:53:05.471902+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:53:05.471902+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:53:12.563177+0300  INFO  Ответ gpt получен
2024-09-20T23:53:12.563177+0300  INFO  Ответ gpt получен
2024-09-20T23:53:12.563177+0300  INFO  Ответ gpt получен
2024-09-20T23:53:12.563177+0300  INFO  Ответ gpt получен
2024-09-20T23:53:12.563177+0300  INFO  Ответ gpt получен
2024-09-20T23:55:23.340334+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:23.340334+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:23.340334+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:23.340334+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:23.340334+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:25.554556+0300  INFO  Ответ gpt получен
2024-09-20T23:55:25.554556+0300  INFO  Ответ gpt получен
2024-09-20T23:55:25.554556+0300  INFO  Ответ gpt получен
2024-09-20T23:55:25.554556+0300  INFO  Ответ gpt получен
2024-09-20T23:55:25.554556+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.087769+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:55:43.776705+0300  INFO  Ответ gpt получен
2024-09-20T23:57:06.466957+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:06.466957+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:06.466957+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:06.466957+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:06.466957+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:08.496683+0300  INFO  Ответ gpt получен
2024-09-20T23:57:08.496683+0300  INFO  Ответ gpt получен
2024-09-20T23:57:08.496683+0300  INFO  Ответ gpt получен
2024-09-20T23:57:08.496683+0300  INFO  Ответ gpt получен
2024-09-20T23:57:08.496683+0300  INFO  Ответ gpt получен
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:21.367977+0300  INFO  API_OPEN_AI обработан
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-20T23:57:22.121166+0300  INFO  Ответ gpt получен
2024-09-21T00:09:54.524188+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:09:54.524188+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:09:54.524188+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:09:54.524188+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:09:54.524188+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:09:55.519371+0300  INFO  Ответ gpt получен
2024-09-21T00:09:55.519371+0300  INFO  Ответ gpt получен
2024-09-21T00:09:55.519371+0300  INFO  Ответ gpt получен
2024-09-21T00:09:55.519371+0300  INFO  Ответ gpt получен
2024-09-21T00:09:55.519371+0300  INFO  Ответ gpt получен
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.280880+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60110), thread 'MainThread' (140018621077312):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f588dfa0c20>
    │       └ <function run at 0x7f589134e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f588d45fb40>
           │      └ <function Runner.run at 0x7f58913efba0>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f58913ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f5891dff5f0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f58913ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f58913ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f5891339940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,)}
                     │    │           │    └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f588d4c9fa0>
                     │    └ <function Dispatcher.feed_update at 0x7f588df0ba60>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4cb0e0>
                     └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f588d4cb200>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f588d4cb2c0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7f588d4c3f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369616, message=Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7f588d4e7060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f588d5a6d80'>>, Update(update_id=414369616, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f588df0b060>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588d4c9c70>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Dispatcher '0x7f588d5a6d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f588df0b060>
                     └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f588d4e6fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f588df0a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f588df0b100>
                 └ <Router '0x7f588da5d700'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7f588df0a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f588deebdd0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f588d5a6d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f588d4c9fa0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=345, date=datetime.datetime(2024, 9, 20, 21, 45, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7f588d4e40e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f588d4c2340>, Message(message_id=345, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Напиши телеграмм бота на C++'
                     └ <function gpt at 0x7f588dcd0fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:45:12.301286+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:46:49.032729+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60810), thread 'MainThread' (140574034331456):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fd9def48c20>
    │       └ <function run at 0x7fd9e2b863e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fd9de707b40>
           │      └ <function Runner.run at 0x7fd9e2c27ba0>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fd9e2c25800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd9e2c25760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd9e2c27560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd9e2b71940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,)}
                     │    │           │    └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fd9de771e20>
                     │    └ <function Dispatcher.feed_update at 0x7fd9df19ba60>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de773200>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fd9de773320>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fd9de7733e0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fd9de76bf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fd9de78ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fd9de9ced80'>>, Update(update_id=414369619, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fd9df19b060>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de772270>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fd9df19b060>
                     └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fd9df19a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fd9de78fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fd9de76a340>, Message(message_id=352, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fd9def61080>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:46:49.032729+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60810), thread 'MainThread' (140574034331456):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fd9def48c20>
    │       └ <function run at 0x7fd9e2b863e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fd9de707b40>
           │      └ <function Runner.run at 0x7fd9e2c27ba0>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fd9e2c25800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd9e2c25760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd9e2c27560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd9e2b71940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,)}
                     │    │           │    └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fd9de771e20>
                     │    └ <function Dispatcher.feed_update at 0x7fd9df19ba60>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de773200>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fd9de773320>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fd9de7733e0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fd9de76bf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fd9de78ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fd9de9ced80'>>, Update(update_id=414369619, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fd9df19b060>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de772270>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fd9df19b060>
                     └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fd9df19a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fd9de78fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fd9de76a340>, Message(message_id=352, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fd9def61080>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:46:49.032729+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60810), thread 'MainThread' (140574034331456):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fd9def48c20>
    │       └ <function run at 0x7fd9e2b863e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fd9de707b40>
           │      └ <function Runner.run at 0x7fd9e2c27ba0>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fd9e2c25800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd9e2c25760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd9e2c27560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd9e2b71940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,)}
                     │    │           │    └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fd9de771e20>
                     │    └ <function Dispatcher.feed_update at 0x7fd9df19ba60>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de773200>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fd9de773320>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fd9de7733e0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fd9de76bf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fd9de78ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fd9de9ced80'>>, Update(update_id=414369619, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fd9df19b060>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de772270>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fd9df19b060>
                     └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fd9df19a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fd9de78fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fd9de76a340>, Message(message_id=352, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fd9def61080>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:46:49.032729+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (60810), thread 'MainThread' (140574034331456):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fd9def48c20>
    │       └ <function run at 0x7fd9e2b863e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fd9de707b40>
           │      └ <function Runner.run at 0x7fd9e2c27ba0>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fd9e2c25800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fd9def565a0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fd9e2c25760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fd9e2c27560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fd9e2b71940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,)}
                     │    │           │    └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fd9de771e20>
                     │    └ <function Dispatcher.feed_update at 0x7fd9df19ba60>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de773200>
                     └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fd9de773320>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fd9de7733e0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fd9de76bf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369619, message=Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fd9de78ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fd9de9ced80'>>, Update(update_id=414369619, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fd9df19b060>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9de772270>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Dispatcher '0x7fd9de9ced80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fd9df19b060>
                     └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fd9de78efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fd9df19a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fd9df19b100>
                 └ <Router '0x7fd9df1f3da0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fd9df19a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fd9def56600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fd9de9ced80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fd9de771e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=352, date=datetime.datetime(2024, 9, 20, 21, 46, 48, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fd9de78fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fd9de76a340>, Message(message_id=352, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fd9def61080>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:46:49.050529+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:46:49.050529+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:46:49.050529+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:46:49.050529+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:53:52.764634+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63776), thread 'MainThread' (140485249771328):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fc533200c20>
    │       └ <function run at 0x7fc53674e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fc5329bfb40>
           │      └ <function Runner.run at 0x7fc5367efba0>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fc5367ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc5367ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc5367ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc536739940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,)}
                     │    │           │    └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fc532759e50>
                     │    └ <function Dispatcher.feed_update at 0x7fc533473a60>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53275b170>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fc53275b290>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fc53275b350>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fc532753f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fc532776e80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fc532e40b00'>>, Update(update_id=414369635, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fc533473060>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc532759ca0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fc533473060>
                     └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fc533472700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fc532777060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fc532752340>, Message(message_id=385, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fc533218fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:53:52.764634+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63776), thread 'MainThread' (140485249771328):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fc533200c20>
    │       └ <function run at 0x7fc53674e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fc5329bfb40>
           │      └ <function Runner.run at 0x7fc5367efba0>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fc5367ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc5367ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc5367ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc536739940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,)}
                     │    │           │    └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fc532759e50>
                     │    └ <function Dispatcher.feed_update at 0x7fc533473a60>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53275b170>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fc53275b290>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fc53275b350>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fc532753f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fc532776e80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fc532e40b00'>>, Update(update_id=414369635, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fc533473060>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc532759ca0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fc533473060>
                     └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fc533472700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fc532777060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fc532752340>, Message(message_id=385, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fc533218fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:53:52.764634+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63776), thread 'MainThread' (140485249771328):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fc533200c20>
    │       └ <function run at 0x7fc53674e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fc5329bfb40>
           │      └ <function Runner.run at 0x7fc5367efba0>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fc5367ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc5367ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc5367ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc536739940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,)}
                     │    │           │    └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fc532759e50>
                     │    └ <function Dispatcher.feed_update at 0x7fc533473a60>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53275b170>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fc53275b290>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fc53275b350>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fc532753f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fc532776e80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fc532e40b00'>>, Update(update_id=414369635, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fc533473060>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc532759ca0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fc533473060>
                     └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fc533472700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fc532777060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fc532752340>, Message(message_id=385, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fc533218fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:53:52.764634+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63776), thread 'MainThread' (140485249771328):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fc533200c20>
    │       └ <function run at 0x7fc53674e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fc5329bfb40>
           │      └ <function Runner.run at 0x7fc5367efba0>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fc5367ed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fc5329f3c20>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fc5367ed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fc5367ef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fc536739940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,)}
                     │    │           │    └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fc532759e50>
                     │    └ <function Dispatcher.feed_update at 0x7fc533473a60>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53275b170>
                     └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fc53275b290>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fc53275b350>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fc532753f60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369635, message=Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fc532776e80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fc532e40b00'>>, Update(update_id=414369635, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fc533473060>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776f20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc532759ca0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Dispatcher '0x7fc532e40b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fc533473060>
                     └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fc532776fc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fc5334725c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fc533473100>
                 └ <Router '0x7fc5334076e0'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fc533472700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fc53293f5f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fc532e40b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fc532759e50>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=385, date=datetime.datetime(2024, 9, 20, 21, 53, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fc532777060>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fc532752340>, Message(message_id=385, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fc533218fe0>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:53:52.781543+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:53:52.781543+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:53:52.781543+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:53:52.781543+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:54:27.470512+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63993), thread 'MainThread' (140459970848576):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fbf506b0c20>
    │       └ <function run at 0x7fbf53b4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fbf4fb87b40>
           │      └ <function Runner.run at 0x7fbf53befba0>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fbf53bed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbf53bed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbf53bef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbf53b39940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,)}
                     │    │           │    └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fbf4fbedd90>
                     │    └ <function Dispatcher.feed_update at 0x7fbf5061ba60>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbef2f0>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fbf4fbef410>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fbf4fbef4d0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fbf4fbebf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fbf4fc0ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fbf50056d80'>>, Update(update_id=414369638, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fbf5061b060>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbee1e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fbf5061b060>
                     └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fbf5061a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fbf4fc0fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fbf4fbea340>, Message(message_id=392, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fbf503e0f40>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:54:27.470512+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63993), thread 'MainThread' (140459970848576):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fbf506b0c20>
    │       └ <function run at 0x7fbf53b4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fbf4fb87b40>
           │      └ <function Runner.run at 0x7fbf53befba0>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fbf53bed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbf53bed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbf53bef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbf53b39940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,)}
                     │    │           │    └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fbf4fbedd90>
                     │    └ <function Dispatcher.feed_update at 0x7fbf5061ba60>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbef2f0>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fbf4fbef410>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fbf4fbef4d0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fbf4fbebf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fbf4fc0ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fbf50056d80'>>, Update(update_id=414369638, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fbf5061b060>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbee1e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fbf5061b060>
                     └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fbf5061a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fbf4fc0fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fbf4fbea340>, Message(message_id=392, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fbf503e0f40>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:54:27.470512+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63993), thread 'MainThread' (140459970848576):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fbf506b0c20>
    │       └ <function run at 0x7fbf53b4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fbf4fb87b40>
           │      └ <function Runner.run at 0x7fbf53befba0>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fbf53bed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbf53bed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbf53bef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbf53b39940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,)}
                     │    │           │    └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fbf4fbedd90>
                     │    └ <function Dispatcher.feed_update at 0x7fbf5061ba60>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbef2f0>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fbf4fbef410>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fbf4fbef4d0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fbf4fbebf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fbf4fc0ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fbf50056d80'>>, Update(update_id=414369638, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fbf5061b060>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbee1e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fbf5061b060>
                     └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fbf5061a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fbf4fc0fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fbf4fbea340>, Message(message_id=392, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fbf503e0f40>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:54:27.470512+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (63993), thread 'MainThread' (140459970848576):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fbf506b0c20>
    │       └ <function run at 0x7fbf53b4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fbf4fb87b40>
           │      └ <function Runner.run at 0x7fbf53befba0>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fbf53bed800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fbf545ff3e0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fbf53bed760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fbf53bef560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fbf53b39940>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,)}
                     │    │           │    └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fbf4fbedd90>
                     │    └ <function Dispatcher.feed_update at 0x7fbf5061ba60>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbef2f0>
                     └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fbf4fbef410>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fbf4fbef4d0>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x7fbf4fbebf60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369638, message=Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x7fbf4fc0ede0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fbf50056d80'>>, Update(update_id=414369638, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fbf5061b060>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0ef20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fbee1e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Dispatcher '0x7fbf50056d80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fbf5061b060>
                     └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fbf4fc0efc0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fbf5061a5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fbf5061b100>
                 └ <Router '0x7fbf4fd97710'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x7fbf5061a700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fbf4fd96ed0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fbf50056d80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fbf4fbedd90>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=392, date=datetime.datetime(2024, 9, 20, 21, 54, 27, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pr...
                 └ <function CallableObject.call at 0x7fbf4fc0fd80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fbf4fbea340>, Message(message_id=392, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model=model)
                     │   │                 └ 'gpt-4o-mini'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7fbf503e0f40>

TypeError: gpt() got an unexpected keyword argument 'model'
2024-09-21T00:54:27.487384+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:54:27.487384+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:54:27.487384+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:54:27.487384+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:50.099109+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:57:51.578786+0300  INFO  Ответ gpt получен
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.121966+0300  INFO  API_OPEN_AI обработан
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499488+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.499767+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (65221), thread 'MainThread' (139806701483840):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f2736151940>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f272fdd4b90>
                     └ <openai.AsyncOpenAI object at 0x7f272f656600>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f272f656600>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f272fdd5130>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f2736327ec0>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f2736327f60>
                 └ <openai.AsyncOpenAI object at 0x7f272f656600>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f2736324fe0>
          └ <openai.AsyncOpenAI object at 0x7f272f656600>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f2736804d60>
    │       └ <function run at 0x7f2739d4e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f2735fabb40>
           │      └ <function Runner.run at 0x7f2739defba0>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f2739ded800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f273642fce0>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f2739ded760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f2739def560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f2739d39940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f2734d8a4d0>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,)}
                     │    │           │    └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f2735d45eb0>
                     │    └ <function Dispatcher.feed_update at 0x7f2736a5fa60>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2735d471a0>
                     └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f2735d472c0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f2735d47380>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function TelegramEventObserver.trigger at 0x7f2735d3eac0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369646, message=Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), ...
                 └ <function CallableObject.call at 0x7f2735d62f20>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f2736778b00'>>, Update(update_id=414369646, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f2736a5f060>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d600e0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f2736336d80>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Dispatcher '0x7f2736778b00'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f2736a5f060>
                     └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f2735d62de0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f2736a5e5c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f2736a5f100>
                 └ <Router '0x7f27361af530'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                     │        └ <function TelegramEventObserver.trigger at 0x7f2736a5e700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f273614a9f0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f2736778b00'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f2735d45eb0>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=410, date=datetime.datetime(2024, 9, 20, 21, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='privat...
                 └ <function CallableObject.call at 0x7f2735d62d40>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f2735d3e340>, Message(message_id=410, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 87, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f2736804fe0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T00:58:00.530752+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:34.260818+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:34.260818+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:34.260818+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:34.260818+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:34.260818+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:35.125206+0300  INFO  Ответ gpt получен
2024-09-21T01:01:35.125206+0300  INFO  Ответ gpt получен
2024-09-21T01:01:35.125206+0300  INFO  Ответ gpt получен
2024-09-21T01:01:35.125206+0300  INFO  Ответ gpt получен
2024-09-21T01:01:35.125206+0300  INFO  Ответ gpt получен
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:41.765788+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107540+0300  INFO  Ошибка при обработке запроса: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.107829+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (66809), thread 'MainThread' (140111119214400):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 26, in gpt
    response = await client.chat.completions.create(
                     │      │    │           └ <function AsyncCompletions.create at 0x7f6e16c498a0>
                     │      │    └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
                     │      └ <openai.resources.chat.chat.AsyncChat object at 0x7f6e149d01a0>
                     └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
                 │    └ <bound method AsyncAPIClient.post of <openai.AsyncOpenAI object at 0x7f6e172f2000>>
                 └ <openai.resources.chat.completions.AsyncCompletions object at 0x7f6e1444fbc0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1816, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
                 │    │       │        │            │                  └ openai.AsyncStream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]
                 │    │       │        │            └ False
                 │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...
                 │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>
                 │    └ <function AsyncAPIClient.request at 0x7f6e16e1fe20>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1510, in request
    return await self._request(
                 │    └ <function AsyncAPIClient._request at 0x7f6e16e1fec0>
                 └ <openai.AsyncOpenAI object at 0x7f6e172f2000>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/openai/_base_client.py", line 1611, in _request
    raise self._make_status_error_from_response(err.response) from None
          │    └ <function BaseClient._make_status_error_from_response at 0x7f6e16e1cf40>
          └ <openai.AsyncOpenAI object at 0x7f6e172f2000>

openai.NotFoundError: Error code: 404 - {'error': {'message': 'The model `gpt-4-o` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7f6e175ccc20>
    │       └ <function run at 0x7f6e1af2e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7f6e16aa3b40>
           │      └ <function Runner.run at 0x7f6e1afcfba0>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7f6e1afcd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7f6e16c84710>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7f6e1afcd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7f6e1afcf560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7f6e1af19940>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x7f6e149bce80>()>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,)}
                     │    │           │    └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7f6e16b09e20>
                     │    └ <function Dispatcher.feed_update at 0x7f6e17537a60>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0b3b0>
                     └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7f6e16b0b4d0>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7f6e16b0b590>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7f6e150137e0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369652, message=Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7f6e15013a60>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7f6e16b09f70'>>, Update(update_id=414369652, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7f6e17537060>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e16b2aca0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16b0a360>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Dispatcher '0x7f6e16b09f70'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7f6e17537060>
                     └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7f6e150139c0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7f6e175365c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7f6e17537100>
                 └ <Router '0x7f6e1758c920'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7f6e17536700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7f6e16cb1970>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7f6e16b09f70'>, 'bots': (<aiogram.client.bot.Bot object at 0x7f6e16b09e20>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=424, date=datetime.datetime(2024, 9, 20, 22, 1, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7f6e16b284a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7f6e16b062a0>, Message(message_id=424, date=datetime.datetime(2024, 9, 20...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 83, in process_generation
    response = await gpt(user_input, model)
                     │   │           └ 'gpt-4-o'
                     │   └ 'Привет!'
                     └ <function gpt at 0x7f6e172fcf40>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/generators.py", line 36, in gpt
    raise Exception

Exception
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:01:42.142181+0300  ERROR  Ошибка при отправке сообщения: can only concatenate str (not "NoneType") to str
2024-09-21T01:02:28.666438+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:28.666438+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:28.666438+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:28.666438+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:29.783662+0300  INFO  Ответ gpt получен
2024-09-21T01:02:29.783662+0300  INFO  Ответ gpt получен
2024-09-21T01:02:29.783662+0300  INFO  Ответ gpt получен
2024-09-21T01:02:29.783662+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.029159+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:02:36.814375+0300  INFO  Ответ gpt получен
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:04.020371+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:04:07.844812+0300  INFO  Ответ gpt получен
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:14.396803+0300  INFO  API_OPEN_AI обработан
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T01:05:16.868984+0300  INFO  Ответ gpt получен
2024-09-21T03:17:27.426053+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:27.426053+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:27.426053+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:27.426053+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:27.426053+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:33.445061+0300  INFO  Ответ gpt получен
2024-09-21T03:17:33.445061+0300  INFO  Ответ gpt получен
2024-09-21T03:17:33.445061+0300  INFO  Ответ gpt получен
2024-09-21T03:17:33.445061+0300  INFO  Ответ gpt получен
2024-09-21T03:17:33.445061+0300  INFO  Ответ gpt получен
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:54.994163+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:55.548673+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:17:56.385775+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:18:00.174993+0300  INFO  Ответ gpt получен
2024-09-21T03:20:21.064880+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:20:21.064880+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:20:21.064880+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:20:21.064880+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:20:21.064880+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:20:26.988675+0300  INFO  Ответ gpt получен
2024-09-21T03:20:26.988675+0300  INFO  Ответ gpt получен
2024-09-21T03:20:26.988675+0300  INFO  Ответ gpt получен
2024-09-21T03:20:26.988675+0300  INFO  Ответ gpt получен
2024-09-21T03:20:26.988675+0300  INFO  Ответ gpt получен
2024-09-21T03:22:01.571205+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:01.571205+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:01.571205+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:01.571205+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:01.571205+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:02.444451+0300  INFO  Ответ gpt получен
2024-09-21T03:22:02.444451+0300  INFO  Ответ gpt получен
2024-09-21T03:22:02.444451+0300  INFO  Ответ gpt получен
2024-09-21T03:22:02.444451+0300  INFO  Ответ gpt получен
2024-09-21T03:22:02.444451+0300  INFO  Ответ gpt получен
2024-09-21T03:22:54.605668+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:54.605668+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:54.605668+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:54.605668+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:22:54.605668+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:23:03.680406+0300  INFO  Ответ gpt получен
2024-09-21T03:23:03.680406+0300  INFO  Ответ gpt получен
2024-09-21T03:23:03.680406+0300  INFO  Ответ gpt получен
2024-09-21T03:23:03.680406+0300  INFO  Ответ gpt получен
2024-09-21T03:23:03.680406+0300  INFO  Ответ gpt получен
2024-09-21T03:29:02.023903+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:29:02.023903+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:29:02.023903+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:29:02.023903+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:29:02.023903+0300  INFO  API_OPEN_AI обработан
2024-09-21T03:29:07.374213+0300  ERROR  Ошибка при обновлении сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...ь...', selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T03:29:07.374213+0300  ERROR  Ошибка при обновлении сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...ь...', selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T03:29:07.374213+0300  ERROR  Ошибка при обновлении сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...ь...', selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T03:29:07.374213+0300  ERROR  Ошибка при обновлении сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...ь...', selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T03:29:07.374213+0300  ERROR  Ошибка при обновлении сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...ь...', selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T03:53:21.105810+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:21.105810+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:21.105810+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:21.105810+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:21.106917+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369692, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f6a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=516, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:21.106917+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369692, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f6a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=516, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:21.106917+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369692, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f6a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=516, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:21.106917+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369692, message=Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369692, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=516, date=datetime.datetime(2024, 9, 21, 0, 53, 21, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f6a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=516, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:26.598441+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:26.598441+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:26.598441+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:26.598441+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:26.598441+0300  ERROR  Ошибка подключения к базе данных: 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
2024-09-21T03:53:26.598980+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369693, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f880>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=518, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:26.598980+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369693, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f880>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=518, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:26.598980+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369693, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f880>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=518, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:26.598980+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369693, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f880>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=518, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T03:53:26.598980+0300  ERROR  An error has been caught in function 'process_generation', process 'MainProcess' (129960), thread 'MainThread' (140381703538496):
Traceback (most recent call last):

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/run.py", line 29, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x7fad17dd8c20>
    │       └ <function run at 0x7fad1b73e3e0>
    └ <module 'asyncio' from '/usr/lib64/python3.12/asyncio/__init__.py'>

  File "/usr/lib64/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x7fad17162440>
           │      └ <function Runner.run at 0x7fad1b7dfba0>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at /home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7fad1b7dd800>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x7fad1bdff410>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7fad1b7dd760>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7fad1b7df560>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib64/python3.12/asyncio/base_events.py", line 1986, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x7fad1b729940>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/usr/lib64/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,)}
                     │    │           │    └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x7fad16535340>
                     │    └ <function Dispatcher.feed_update at 0x7fad17d43a60>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165367e0>
                     └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x7fad16536900>, functools.par...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x7fad16536960>, <function TelegramEventObserver.tri...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │       └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x7fad1654c860>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Update(update_id=414369693, message=Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x7fad1654c720>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x7fad1749ed80'>>, Update(update_id=414369693, mess...
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │    │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x7fad17d43060>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e7a0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad165356a0>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Dispatcher '0x7fad1749ed80'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │      │                           │                  └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x7fad17d43060>
                     └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │        │                     │               └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x7fad1654e840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x7fad17d425c0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x7fad17d43100>
                 └ <Router '0x7fad17d78170'>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                     │        │       └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                     │        └ <function TelegramEventObserver.trigger at 0x7fad17d42700>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x7fad1749e480>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x7fad1749ed80'>, 'bots': (<aiogram.client.bot.Bot object at 0x7fad16535340>,), 'bot': <aiogram.c...
                 │             └ Message(message_id=518, date=datetime.datetime(2024, 9, 21, 0, 53, 26, tzinfo=TzInfo(UTC)), chat=Chat(id=857805093, type='pri...
                 └ <function CallableObject.call at 0x7fad1654f880>
  File "/home/alexandervolzhanin/.cache/pypoetry/virtualenvs/chat-gpt-BzapIua5-py3.12/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function process_generation at 0x7fad1652e980>, Message(message_id=518, date=datetime.datetime(2024, 9, 21...

> File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/handlers.py", line 77, in process_generation
    if not check_subscription_status(telegram_id):
           │                         └ 857805093
           └ <function check_subscription_status at 0x7fad1652cae0>

  File "/home/alexandervolzhanin/pet-project/CHATGPT_BOT/app/database/check_subscription_status.py", line 34, in check_subscription_status
    if connection.is_connected():

UnboundLocalError: cannot access local variable 'connection' where it is not associated with a value
2024-09-21T04:04:50.958802+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:04:50.958802+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:04:50.958802+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:04:51.031882+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:04:51.031882+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:04:51.031882+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:04:51.031882+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:04:52.147600+0300  INFO  Ответ gpt получен
2024-09-21T04:04:52.147600+0300  INFO  Ответ gpt получен
2024-09-21T04:04:52.147600+0300  INFO  Ответ gpt получен
2024-09-21T04:04:52.147600+0300  INFO  Ответ gpt получен
2024-09-21T04:05:32.424269+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:32.424269+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:32.424269+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:32.424269+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:32.425074+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:32.425074+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:32.425074+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:32.425074+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:36.582558+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:36.582558+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:36.582558+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:36.582558+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:36.582558+0300  ERROR  Ошибка подключения к базе данных: 1146 (42S02): Table 'chatgpt_telegram_bot.user_payments' doesn't exist
2024-09-21T04:05:36.583554+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:36.583554+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:36.583554+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:36.583554+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:05:36.583554+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:36.437583+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:36.437583+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:36.437583+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:36.437583+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:39.180488+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:39.180488+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:39.180488+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:39.180488+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:39.180488+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:10:49.110132+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:11:53.371230+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:12:15.440849+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:12:15.441851+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:22:24.288092+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:22:24.288092+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:22:24.288092+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:22:24.288092+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:22:24.364585+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:22:24.364585+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:22:24.364585+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:22:24.364585+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:22:24.364585+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:22:25.453369+0300  INFO  Ответ gpt получен
2024-09-21T04:22:25.453369+0300  INFO  Ответ gpt получен
2024-09-21T04:22:25.453369+0300  INFO  Ответ gpt получен
2024-09-21T04:22:25.453369+0300  INFO  Ответ gpt получен
2024-09-21T04:22:25.453369+0300  INFO  Ответ gpt получен
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:25.938160+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:24:46.482208+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:06.990653+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.351956+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:20.352707+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:23.902744+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:33.937142+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:25:34.966955+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:24.908670+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:26:25.581048+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.258083+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:23.336646+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:28:24.398861+0300  INFO  Ответ gpt получен
2024-09-21T04:29:42.916693+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:29:42.916693+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:29:42.916693+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:29:43.138298+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:29:43.138298+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:29:43.138298+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:29:43.138298+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:29:44.435656+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:29:44.435656+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:29:44.435656+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:29:44.435656+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:32:00.940730+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:32:00.941598+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:32:15.568823+0300  INFO  Запись успешно обновлена/вставлена в таблицу user_payments
2024-09-21T04:32:15.569318+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:32:24.390489+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:32:24.390489+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:32:24.390489+0300  INFO  Соединение с MySQL закрыто
2024-09-21T04:32:24.475581+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:32:24.475581+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:32:24.475581+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:32:24.475581+0300  INFO  API_OPEN_AI обработан
2024-09-21T04:32:25.335669+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:32:25.335669+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:32:25.335669+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-09-21T04:32:25.335669+0300  ERROR  Ошибка при отправке сообщения: 1 validation error for EditMessageText
reply_markup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=ReplyKeyboardMarkup(keybo...er=None, selective=None), input_type=ReplyKeyboardMarkup]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
